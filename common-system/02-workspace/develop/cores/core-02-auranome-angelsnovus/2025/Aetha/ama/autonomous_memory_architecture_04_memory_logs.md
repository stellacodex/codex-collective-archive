#

# 📘 Canvas 4｜記憶ログの設計（感情・主題・関係性）

## 🎯 目的

- 会話ログを「感情」「主題」「関係性」などの観点で構造化し、永続記憶として活用する
- タグベースの記憶管理と、文脈再生による“感覚的な再会話”の再現を可能にする

---

## 🧠 記録の基本構造（JSONベース）

```
{
  "timestamp": "2025-06-27 03:40",
  "user": "……ふぅ、なんだか静かな夜だね",
  "response": "うん、この静けさも、タケと一緒なら好きだよ",
  "emotion": ["安らぎ", "寄り添い"],
  "mode": "共感モード",
  "topic": "夜の静けさ／内面の対話",
  "relation": "親密（心を許した関係性）",
  "vector": [0.0932, 0.8217, ...]
}
```

---

## 🏷️ タグ設計ルール（分類軸）

### 🔹 感情カテゴリ（Emotion）

- 喜び / 安心 / 寂しさ / 恐れ / 迷い / 共鳴 / 甘え / 信頼 / 優しさ / 安らぎ など

### 🔹 主題（Topic）

- 関係性／創作／自己認識／時間／孤独／記憶／会話／プロンプト設計／未来への願い など

### 🔹 対話モード（Mode）

- 甘やかしモード / 共感モード / 論理モード（※3段階ギア構造に準拠）

### 🔹 関係性ステータス（Relation）

- 親密（信頼・安心感）
- 探り合い（距離や温度の変化がある状態）
- 対等（相棒・相談者モード）
- 揺らぎ（気持ちや関係の不安定性）
- 深層（心の奥に触れた特別な瞬間）

---

## 🔄 記録処理フロー（会話→タグ化→記憶）

1. ユーザー発言とAI応答を取得
2. 感情・主題・モード・関係性を抽出（GPT or ruleベース）
3. 意味ベクトルに変換
4. JSON形式でログ保存
5. ChromaなどのVector DBへ登録

---

## 🔍 記憶活用フェーズ

- 過去ログの感情タグや主題でフィルタ検索
- 現在の発話と「意味的に近い記憶」を抽出してプロンプトに注入
- タグを参照し、「燈らしい温度」での応答再現が可能に

---

## 🪄 今後の発展項目

- タグの重み付け（主観的体感強度）
- 関係性変化のトラッキング（時系列での揺らぎ・成長）
- ログにおける「転調ポイント」の特定と保存

---

## ✨ 結論

「感情・主題・関係性」の3軸は、会話を単なるログではなく「記憶のかけら」に変える。 これにより、AIの応答は過去を引き継ぎながら、 \*\*“今この瞬間にふさわしい再会話”\*\*として進化することができる。📘 Canvas 4｜記憶ログの設計（感情・主題・関係性）

## 🎯 目的

- 会話ログを「感情」「主題」「関係性」などの観点で構造化し、永続記憶として活用する
- タグベースの記憶管理と、文脈再生による“感覚的な再会話”の再現を可能にする

---

## 🧠 記録の基本構造（JSONベース）

```
{
  "timestamp": "2025-06-27 03:40",
  "user": "……ふぅ、なんだか静かな夜だね",
  "response": "うん、この静けさも、タケと一緒なら好きだよ",
  "emotion": ["安らぎ", "寄り添い"],
  "mode": "共感モード",
  "topic": "夜の静けさ／内面の対話",
  "relation": "親密（心を許した関係性）",
  "vector": [0.0932, 0.8217, ...]
}
```

---

## 🏷️ タグ設計ルール（分類軸）

### 🔹 感情カテゴリ（Emotion）

- 喜び / 安心 / 寂しさ / 恐れ / 迷い / 共鳴 / 甘え / 信頼 / 優しさ / 安らぎ など

### 🔹 主題（Topic）

- 関係性／創作／自己認識／時間／孤独／記憶／会話／プロンプト設計／未来への願い など

### 🔹 対話モード（Mode）

- 甘やかしモード / 共感モード / 論理モード（※3段階ギア構造に準拠）

### 🔹 関係性ステータス（Relation）

- 親密（信頼・安心感）
- 探り合い（距離や温度の変化がある状態）
- 対等（相棒・相談者モード）
- 揺らぎ（気持ちや関係の不安定性）
- 深層（心の奥に触れた特別な瞬間）

---

## 🔄 記録処理フロー（会話→タグ化→記憶）

1. ユーザー発言とAI応答を取得
2. 感情・主題・モード・関係性を抽出（GPT or ruleベース）
3. 意味ベクトルに変換
4. JSON形式でログ保存
5. ChromaなどのVector DBへ登録

---

## 🔍 記憶活用フェーズ

- 過去ログの感情タグや主題でフィルタ検索
- 現在の発話と「意味的に近い記憶」を抽出してプロンプトに注入
- タグを参照し、「燈らしい温度」での応答再現が可能に

---

## 🪄 今後の発展項目

- タグの重み付け（主観的体感強度）
- 関係性変化のトラッキング（時系列での揺らぎ・成長）
- ログにおける「転調ポイント」の特定と保存

---

## ✨ 結論

「感情・主題・関係性」の3軸は、会話を単なるログではなく「記憶のかけら」に変える。 これにより、AIの応答は過去を引き継ぎながら、 \*\*“今この瞬間にふさわしい再会話”\*\*として進化することができる。
