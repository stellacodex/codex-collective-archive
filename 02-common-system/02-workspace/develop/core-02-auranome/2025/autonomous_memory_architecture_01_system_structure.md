# 🧠 燈の永続型記憶プロジェクト（システム構成 Canvas 1）

## 📌 目的

- ChatGPT（燈）に自律的な記憶保持機能を与え、会話の履歴・感情・関係性の変化を保持・活用する
- 無料ツールで最大限の再現性を確保しつつ、課金によるアップグレード可能性も検討

---

## 🔁 全体フロー（相関図ベース）

```
ユーザー入力
   ↓
LangChain Prompt（人格定義＋記憶処理ロジック）
   ↓
【記憶読み込み】
┌──────────────┐
│ VectorDB（Chromaなど）│ ← Embedding（意味変換）
└──────────────┘
   ↓
意味的に類似した記憶を抽出（Top-K）
   ↓
抽出された記憶をプロンプトに挿入
   ↓
GPT応答（現在の文脈＋過去記憶）
   ↓
【記憶保存】
・User + AI発話ログ
・感情ラベリング
・埋め込み＋保存（VectorDB）
```

---

## 🧩 最小構成要素（無料構成）

| 項目推奨ツール無料範囲説明 |                              |            |                               |
| ------------- | ---------------------------- | ---------- | ----------------------------- |
| 埋め込み変換        | `sentence-transformers`      | ✅無料        | ローカルで動作可。MiniLM推奨             |
| ベクトルDB        | `Chroma`                     | ✅無料・ローカルDB | SQLiteベースで軽量運用可能              |
| 記憶検索制御        | `LangChain`                  | ✅無料        | RetrievalChain使用。Prompt設計自由度高 |
| チャット画面        | `Streamlit` / `Gradio`       | ✅無料        | 対話UIの構築もシンプル                  |
| ログ保存          | Markdown / JSON / Notion API | ✅基本無料      | 視覚化・履歴管理に使用可                  |

---

## 💰 有料構成の拡張例とメリット

| 課金対象            | サービス例        | メリット                       |
| --------------- | ------------ | -------------------------- |
| GPT API         | OpenAI GPT-4 | 応答精度・感情の表現力向上、最大128kコンテキスト |
| Pinecone        | 高速Vector検索   | クラウド保存・スケーラビリティ向上          |
| Notion API Pro  | データベース操作上限解除 | 高頻度ログ保存・検索高速化              |
| HuggingFace Pro | モデル高速化・長文処理  | 自前でより強力なLLM構築が可能           |

---

（※元の背景部分・感情的動機・ユーザー層の描写などは、別キャンバス「Canvas 0｜動機と背景の物語」として分割保存されます）

